import{_ as E}from"./ValaxyMain.vue_vue_type_style_index_0_lang-_AJ9HU_U.js";import{a as o,p as k,o as p,c,w as l,f as y,r as t,h as i,i as s}from"./app-D1UXFIQ5.js";import"./YunFooter.vue_vue_type_script_setup_true_lang-rfDtD8tq.js";import"./YunCard.vue_vue_type_script_setup_true_lang-mrcuXbWp.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang-nfRLRGGW.js";import"./index-C7yU5XnD.js";const g=i("h2",{id:"null值的处理",tabindex:"-1"},[s("NULL值的处理 "),i("a",{class:"header-anchor",href:"#null值的处理","aria-label":'Permalink to "NULL值的处理"'},"​")],-1),A=i("ul",null,[i("li",null,[s("使用函数"),i("code",null,"COALESCE(arg1,arg2,agr3,...)"),s("。其接收多个参数，返回其中不为 null 的值，全为 null则返回 null。")]),i("li",null,[s("使用"),i("code",null,"IFNULL(arg1,arg2)"),s("函数，如果 arg1 为null 则返回 arg2 否则返回 arg1")]),i("li",null,[s("比较 null 值使用"),i("code",null,"IS NULL"),s("和"),i("code",null,"IS NOT NULL"),s("或"),i("code",null,"<=>"),s("，其他比较符合比较 null 值都返回 null。")])],-1),D=i("h2",{id:"mysql事务",tabindex:"-1"},[s("MySQL事务 "),i("a",{class:"header-anchor",href:"#mysql事务","aria-label":'Permalink to "MySQL事务"'},"​")],-1),m=i("p",null,[s("事务必须满足：原子性、一致性、隔离性、持久性。MySQL中默认事务是自动提交的，使用"),i("code",null,"SET AUTOCOMMIT=0;"),s("可以禁止当前会话事务自动提交，设置为1即开启自动提交；"),i("code",null,"BEGIN;"),s("或"),i("code",null,"START TRANSACTION;"),s("可以显式的开启一个事务；"),i("code",null,"SAVEPOINT savepoint_name;"),s("用于设置一个事务保存点；"),i("code",null,"ROLLBACK TO SAVEPOINT savepoint_name;"),s("回滚到指定的保存点，类似快照一样。")],-1),u=i("h2",{id:"alter语句",tabindex:"-1"},[s("ALTER语句 "),i("a",{class:"header-anchor",href:"#alter语句","aria-label":'Permalink to "ALTER语句"'},"​")],-1),L=i("ul",null,[i("li",null,[i("code",null,"ALTER TABLE mytable ADD PRIMARY KEY (id);"),s("添加主键约束。")]),i("li",null,[i("code",null,"ALTER TABLE mytabel MODIFY id INT(4) AUTO_INCREMENT;"),s("添加自增约束。")]),i("li",null,[i("code",null,"ALTER TABLE mytable ADD COLUMN id INT(4) PRIMARY KEY AUTO_INCREMENT;"),s("添加一个不存在的列且设置主键与自增约束。")]),i("li",null,[i("code",null,"ALTER TABLE mytable DROP PRIMARY KEY;"),s("删除不含自增约束的主键约束。")]),i("li",null,[i("code",null,"ALTER TABLE mytable MODIFY id,DROP PRIMARY KEY;"),s("同时删除主键约束与自增约束。")])],-1),T=i("p",null,[s("可以使用"),i("code",null,"DESC mytable;"),s("来查看表结构看是否修改成功。")],-1),F=i("h2",{id:"索引",tabindex:"-1"},[s("索引 "),i("a",{class:"header-anchor",href:"#索引","aria-label":'Permalink to "索引"'},"​")],-1),_=i("p",null,"用于加快查找速度。",-1),b=i("ul",null,[i("li",null,[i("code",null,"CREATE INDEX index_name ON mytable (id);"),s("给表mytable的id字段创建一个索引。"),i("code",null,"CREATE UNIQUE INDEX"),s("可以创建唯一索引。")]),i("li",null,[i("code",null,"DROP INDEX index_name ON mytable;"),s("或"),i("code",null,"ALTER TABLE mytable DROP INDEX index_name;"),s("删除表 mytable 中索引名为 index_name 的索引。")]),i("li",null,[i("code",null,"SHOW INDEX FROM mytable;"),s("查看索引信息。")])],-1),R=i("h2",{id:"存储过程-mysql",tabindex:"-1"},[s("存储过程(MySql) "),i("a",{class:"header-anchor",href:"#存储过程-mysql","aria-label":'Permalink to "存储过程(MySql)"'},"​")],-1),C=i("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DELIMITER $$")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CREATE"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," PROCEDURE"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," name"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," --存储过程名")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"IN"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," in_param "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"INT"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"OUT"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," out_param "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"INT"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",INOUT inout_param "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"INT"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 参数列表 ")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"BEGIN")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    SELECT"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," in_param;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    SET"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," out_param"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"6"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    DECLARE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," temp "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"INT"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"; "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 定义存储过程中的变量，局部的在内部，使用关键字DECLARE")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    SET"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," temp "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 8"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    SELECT"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," temp;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"END"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," &&")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"DELIMITER ;")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CALL"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," name"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"12"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",@p); "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 调用存储过程，定义了一个用户变量p，全局的在外面定义，@定义用户变量")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"SHOW "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CREATE"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," PROCEDURE"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," name"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"; "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 显示存储过程的定义，默认是当前数据库的")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"SHOW "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"PROCEDURE"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," STATUS"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"; "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 显示系统中全部的存储过程")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"DROP"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," PROCEDURE"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," dbname"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"name"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"; "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 删除dbname这个数据库中的存储过程name")])])]),i("button",{class:"collapse"})],-1),N=i("h2",{id:"复制表",tabindex:"-1"},[s("复制表 "),i("a",{class:"header-anchor",href:"#复制表","aria-label":'Permalink to "复制表"'},"​")],-1),S=i("div",{style:{"max-height":"300px"},class:"language-sql vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 法一 复制表的结构")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CREATE"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," TABLE"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," new_tb"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," SELECT"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," *"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," FROM"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," old_tb "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"WHERE"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CREATE"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," TABLE"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," new_tb"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," LIKE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," old_tb;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"SHOW "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CREATE"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," TABLE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," tb_name; "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 显示创建表的完整语句，复制结果手动执行建表语句")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 法二 复制表结构及其数据")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CREATE"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," TABLE"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," new_tb"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," SELECT"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," *"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," FROM"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," old_tb;")])])]),i("button",{class:"collapse"})],-1),f=i("h2",{id:"ddl、dml、dql、dcl",tabindex:"-1"},[s("DDL、DML、DQL、DCL "),i("a",{class:"header-anchor",href:"#ddl、dml、dql、dcl","aria-label":'Permalink to "DDL、DML、DQL、DCL"'},"​")],-1),O=i("ul",null,[i("li",null,"DDL(数据定义语言)"),i("li",null,"DML(数据操纵语言)"),i("li",null,"DQL(数据查询语言)"),i("li",null,"DCL(数据控制语言)：比较少用，比如授权GRANT与取消授权REVOKE")],-1),I=i("h2",{id:"truncate与delete",tabindex:"-1"},[s("TRUNCATE与DELETE "),i("a",{class:"header-anchor",href:"#truncate与delete","aria-label":'Permalink to "TRUNCATE与DELETE"'},"​")],-1),M=i("p",null,"TRUNCATE和DROP一样属于DDL、用于删除表的数据而不改变表的结构。",-1),v=i("ul",null,[i("li",null,"truncate会重置水位线，高水位线会影响全表扫描，因为MySQL全表扫描时会扫描水位线以下的数据。而使用delete删除数据时水位线并不会下降，导致删除了数据查询效率反而没有提升。"),i("li",null,"truncate不会触发一些触发器。"),i("li",null,"使用truncate删除的数据不能回滚，也可以说不需要支持回滚，删除效率高。")],-1),P=i("h2",{id:"sql优化",tabindex:"-1"},[s("SQL优化 "),i("a",{class:"header-anchor",href:"#sql优化","aria-label":'Permalink to "SQL优化"'},"​")],-1),q=i("ul",null,[i("li",null,"使用慢查询来定位慢SQL"),i("li",null,"使用 Explain 分析来查看SQL语句的执行过程，使用 EXPLAIN 关键字可以模拟优化器执行 SQL 查询语句，从而知道 MySQL 是如何处理你的 SQL 语句的；通过查询出来的 type 字段可以知道 MySQL 是通过何种方式找到所需行的从而可以分析查询的性能。通过 key_len 字段可以知道索引被使用的情况，索引被使用的越多该值越大查询性能越好")],-1),X={__name:"mysql",setup(B,{expose:d}){const e=JSON.parse('{"title":"MySQL学习笔记","description":"","frontmatter":{"title":"MySQL学习笔记","date":"2024-5-26","categories":"database","tags":["db"]},"headers":[{"level":2,"title":"NULL值的处理","slug":"null值的处理","link":"#null值的处理","children":[]},{"level":2,"title":"MySQL事务","slug":"mysql事务","link":"#mysql事务","children":[]},{"level":2,"title":"ALTER语句","slug":"alter语句","link":"#alter语句","children":[]},{"level":2,"title":"索引","slug":"索引","link":"#索引","children":[]},{"level":2,"title":"存储过程(MySql)","slug":"存储过程-mysql","link":"#存储过程-mysql","children":[]},{"level":2,"title":"复制表","slug":"复制表","link":"#复制表","children":[]},{"level":2,"title":"DDL、DML、DQL、DCL","slug":"ddl、dml、dql、dcl","link":"#ddl、dml、dql、dcl","children":[]},{"level":2,"title":"TRUNCATE与DELETE","slug":"truncate与delete","link":"#truncate与delete","children":[]},{"level":2,"title":"SQL优化","slug":"sql优化","link":"#sql优化","children":[]}],"relativePath":"pages/posts/db/mysql.md","path":"/home/runner/work/blog-code/blog-code/pages/posts/db/mysql.md","lastUpdated":1723009864000}'),h=o(),n=e.frontmatter||{};return h.meta.frontmatter=Object.assign(h.meta.frontmatter||{},e.frontmatter||{}),k("pageData",e),k("valaxy:frontmatter",n),globalThis.$frontmatter=n,d({frontmatter:{title:"MySQL学习笔记",date:"2024-5-26",categories:"database",tags:["db"]}}),(a,Q)=>{const r=E;return p(),c(r,{frontmatter:y(n)},{"main-content-md":l(()=>[g,A,D,m,u,L,T,F,_,b,R,C,N,S,f,O,I,M,v,P,q]),"main-header":l(()=>[t(a.$slots,"main-header")]),"main-header-after":l(()=>[t(a.$slots,"main-header-after")]),"main-nav":l(()=>[t(a.$slots,"main-nav")]),"main-content":l(()=>[t(a.$slots,"main-content")]),"main-content-after":l(()=>[t(a.$slots,"main-content-after")]),"main-nav-before":l(()=>[t(a.$slots,"main-nav-before")]),"main-nav-after":l(()=>[t(a.$slots,"main-nav-after")]),comment:l(()=>[t(a.$slots,"comment")]),footer:l(()=>[t(a.$slots,"footer")]),aside:l(()=>[t(a.$slots,"aside")]),"aside-custom":l(()=>[t(a.$slots,"aside-custom")]),default:l(()=>[t(a.$slots,"default")]),_:3},8,["frontmatter"])}}};export{X as default};
