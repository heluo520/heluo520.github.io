import{_ as p}from"./ValaxyMain.vue_vue_type_style_index_0_lang-B9K2Oimw.js";import{a as F,p as n,o,c,w as l,f as g,g as y,r as a,h as s,i}from"./app-CEsek8-U.js";import"./YunFooter.vue_vue_type_script_setup_true_lang-DTpMhzHz.js";import"./YunCard.vue_vue_type_script_setup_true_lang-CzKeoQea.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang-tFfsDj90.js";import"./index-C7yU5XnD.js";const C="/assets/docker%E5%AE%B9%E5%99%A8%E7%BB%84%E6%88%90-Dwg9J2xq.png",u=s("p",null,"本文内容包括在虚拟机上安装Docker以及在阿里云ECS上安装Docker",-1),B=s("h2",{id:"docker安装基于ubuntu20-04系统",tabindex:"-1"},[i("Docker安装基于Ubuntu20.04系统 "),s("a",{class:"header-anchor",href:"#docker安装基于ubuntu20-04系统","aria-label":'Permalink to "Docker安装基于Ubuntu20.04系统"'},"​")],-1),E=s("p",null,[i("想在阿里云ECS上安装请猛击"),s("a",{href:"#aliyunecs"},"阿里云服务器安装Docker教程")],-1),m=s("p",null,"先卸载老版本，再更新软件包索引，并且安装必要的依赖软件，添加一个新的 HTTPS 软件源。",-1),b=s("div",{style:{"max-height":"300px"},class:"language-shell vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"shell"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," apt-get"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," remove"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," docker"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," docker-engine"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," docker.io"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," containerd"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," runc"),s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," # 卸载老版本")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," apt"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," update")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," apt"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," install"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," apt-transport-https"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," ca-certificates"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," curl"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," gnupg-agent"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," software-properties-common")])])]),s("button",{class:"collapse"})],-1),v=s("p",null,"导入原仓库的GPG key。",-1),_=s("div",{style:{"max-height":"300px"},class:"language-shell vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"shell"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"curl"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -fsSL"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," https://download.docker.com/linux/ubuntu/gpg"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," |"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," sudo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," apt-key"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," add"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," -")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 阿里云的镜像仓库的GPG key 在云服务器上建议用此")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"curl"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -fsSL"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," https://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," |"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," sudo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," apt-key"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," add"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," -")])])]),s("button",{class:"collapse"})],-1),D=s("p",null,[i("~~如果不成功可以使用国内源"),s("code",null,"curl -fsSL https://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg"),i("；~~如果还是不行就魔法上网点击链接将gpg文件下载到本地并使用命令手动添加"),s("code",null,"apt-key add ./gpg"),i("。此处我是进入了gpg文件所在文件夹。")],-1),f=s("p",null,"将Docker APT软件源添加到系统中，Docker 软件源被启用了，你可以安装软件源中任何可用的 Docker 版本。",-1),A=s("div",{style:{"max-height":"300px"},class:"language-shell vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"shell"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 以下使用一个就行")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 官方版")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," add-apt-repository"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "deb [arch=amd64] https://download.docker.com/linux/ubuntu $('),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"lsb_release"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -cs"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},') stable"')]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 阿里云的apt源")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," add-apt-repository"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "deb [arch=amd64]  http://mirrors.aliyun.com/docker-ce/linux/ubuntu $('),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"lsb_release"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -cs"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},') stable"')]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# ecs源")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," add-apt-repository"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "deb [arch=amd64]  http://mirrors.aliyuncs.com/docker-ce/linux/ubuntu $('),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"lsb_release"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -cs"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},') stable"')]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 添加换源版本")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"echo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://mirrors.aliyun.com/docker-ce/linux/ubuntu $('),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"lsb_release"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -cs"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},') stable"'),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," |"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," sudo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," tee"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /etc/apt/sources.list.d/docker.list"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," >"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /dev/null")])])]),s("button",{class:"collapse"})],-1),x=s("p",null,"如果出现错误",-1),$=s("div",{style:{"max-height":"300px"},class:"language-shell vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"shell"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"W:"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," GPG"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," error:"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," https://mirrors.aliyun.com/docker-ce/linux/ubuntu"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," focal"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," InRelease:"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," The"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," following"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," signatures"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," couldn't be verified because the public key is not available: NO_PUBKEY 7EA0A9C3F273FCD8")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"E: The repository 'https://mirrors.aliyun.com/docker-ce/linux/ubuntu"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," focal"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," InRelease' is not signed.")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"N: Updating from such a repository can't"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," be"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," done"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," securely,"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," and"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," is"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," therefore"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," disabled"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," by"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," default.")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"N:"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," See"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," apt-secure"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"8"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"manpage"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," for"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," repository"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," creation"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," and"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," user"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," configuration"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," details.")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"E:"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," The"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," repository"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," 'https://download.docker.com/linux/ubuntu focal Release'"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," does"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," not"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," have"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," a"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," Release"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," file.")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"N:"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," Updating"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," from"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," such"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," a"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," repository"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," can't be done securely, and is therefore disabled by default.")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"N: See apt-secure(8) manpage for repository creation and user configuration details.")])])]),s("button",{class:"collapse"})],-1),q=s("p",null,[s("s",null,[i("使用如下命令添加公钥： "),s("code",null,"sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 425956BB3E31DF51"),i(" 问题可以暂时解决。")])],-1),P=s("p",null,"安装 Docker 最新版本",-1),S=s("div",{style:{"max-height":"300px"},class:"language-shell vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"shell"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," apt"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," update")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," apt"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," install"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," docker-ce"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," docker-ce-cli"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," containerd.io")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# sudo apt update")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# sudo apt install docker-ce=<version> docker-ce-cli=<version> containerd.io #安装指定版本的docker ce代表社区版")])])]),s("button",{class:"collapse"})],-1),R=s("p",null,"当不想让 Docker 自动更新时可以锁定Docker版本",-1),j=s("div",{style:{"max-height":"300px"},class:"language-shell vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"shell"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," apt-mark"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," hold"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," docker-ce")])])]),s("button",{class:"collapse"})],-1),N=s("p",null,"安装完成后 Docker 服务会自动启动，也可以输入以下命令手动启动，以下命令包含docker服务的启动、停止、重启、开机自启动。",-1),w=s("div",{style:{"max-height":"300px"},class:"language-shell vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"shell"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," systemctl"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," status"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," docker"),s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," # 查看docker服务的状态")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," systemctl"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," start"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," docker"),s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," # 启动docker服务")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," systemctl"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," start"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," docker"),s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," # 停止")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," systemctl"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," restart"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," docker"),s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," # 重启")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," systemctl"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," enable"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," docker"),s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," # 开机启动")])])]),s("button",{class:"collapse"})],-1),T=s("h2",{id:"修改docker仓库镜像源",tabindex:"-1"},[i("修改Docker仓库镜像源 "),s("a",{class:"header-anchor",href:"#修改docker仓库镜像源","aria-label":'Permalink to "修改Docker仓库镜像源"'},"​")],-1),M=s("p",null,[i("先使用命令"),s("code",null,"systemctl cat docker | grep '\\-\\-registry\\-mirror'"),i("查看是否配置了镜像源。如果该命令有输出，那么请执行 $ systemctl cat docker 查看 ExecStart= 出现的位置，修改对应的文件内容去掉 --registry-mirror 参数及其值。")],-1),U=s("p",null,[i("如果没有输出或已经执行了有输出的操作后使用命令"),s("code",null,"sudo vim /etc/docker/daemon.json"),i("创建该文件(没有则创建，可以先查看是否存在)，修改文件中内容，内容是添加的镜像源可以有多个，此处为网易与百度的，配置"),s("strong",null,"阿里云的镜像加速器"),i("更好。")],-1),G=s("div",{style:{"max-height":"300px"},class:"language-shell vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"shell"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},'  "registry-mirrors"'),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},":"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," [")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},'    "https://hub-mirror.c.163.com"'),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},",")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},'    "https://mirror.baidubce.com"')]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  ]")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),s("button",{class:"collapse"})],-1),L=s("blockquote",null,[s("p",null,"要确保文件复合json文件格式，否则docker无法启动")],-1),O=s("p",null,"重启服务",-1),I=s("div",{style:{"max-height":"300px"},class:"language-shell vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"shell"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," systemctl"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," daemon-reload")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," systemctl"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," restart"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," docker")])])]),s("button",{class:"collapse"})],-1),Q=s("p",null,"查看加速镜像源是否配置成功",-1),V=s("div",{style:{"max-height":"300px"},class:"language-shell vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"shell"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," docker"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," info")])])]),s("button",{class:"collapse"})],-1),J=s("p",null,"出现包含如下内容则表示成功(没有则关闭终端重新启动一个终端执行命令)",-1),W=s("div",{style:{"max-height":"300px"},class:"language-txt vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"txt"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",null,"Registry Mirrors:")]),i(`
`),s("span",{class:"line"},[s("span",null,"  https://hub-mirror.c.163.com/")]),i(`
`),s("span",{class:"line"},[s("span",null,"  https://mirror.baidubce.com/")])])]),s("button",{class:"collapse"})],-1),Y=s("h2",{id:"以非root身份执行docker命令",tabindex:"-1"},[i("以非Root身份执行Docker命令 "),s("a",{class:"header-anchor",href:"#以非root身份执行docker命令","aria-label":'Permalink to "以非Root身份执行Docker命令"'},"​")],-1),H=s("p",null,"执行以下命令将当前用户添加到Docker用户组中",-1),K=s("div",{style:{"max-height":"300px"},class:"language-shell vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"shell"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," usermod"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -aG"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," $USER "),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"docker")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"newgrp"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," docker"),s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," # 更新组")])])]),s("button",{class:"collapse"})],-1),z=s("h2",{id:"镜像",tabindex:"-1"},[i("镜像 "),s("a",{class:"header-anchor",href:"#镜像","aria-label":'Permalink to "镜像"'},"​")],-1),X=s("p",null,"命令",-1),Z=s("ul",null,[s("li",null,"查找镜像")],-1),ss=s("div",{style:{"max-height":"300px"},class:"language-shell vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"shell"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"docker"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," search"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," mysql")])])]),s("button",{class:"collapse"})],-1),is=s("ul",null,[s("li",null,"拉取镜像")],-1),ls=s("div",{style:{"max-height":"300px"},class:"language-shell vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"shell"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 拉取mysql容器中标签为8.0.24的镜像")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"docker"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," pull"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," mysql:8.0.24")])])]),s("button",{class:"collapse"})],-1),ts=s("h2",{id:"容器",tabindex:"-1"},[i("容器 "),s("a",{class:"header-anchor",href:"#容器","aria-label":'Permalink to "容器"'},"​")],-1),as=s("p",null,[i("本质是一个进程 "),s("strong",null,"最佳实践-通过镜像来创建容器")],-1),es=s("ul",null,[s("li",null,"创建交互式容器，输入exit退出，退出容器后容器会停止")],-1),hs=s("div",{style:{"max-height":"300px"},class:"language-shell vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"shell"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"$"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," docker"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," pull"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," centos:7"),s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," #先从仓库中拉取一个镜像来使用")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"$"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," docker"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," run"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -it"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --name=mycentos7-1"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," centos:7"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /bin/bash"),s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," # 创建后会运行并进入其bash的终端")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# --name指定容器名、centos:7为镜像文件名")])])]),s("button",{class:"collapse"})],-1),ks=s("ul",null,[s("li",null,"创建守护式容器")],-1),ns=s("div",{style:{"max-height":"300px"},class:"language-shell vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"shell"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"$"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," docker"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," run"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -di"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --name=mycentos7-2"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," centos:7"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /bin/bash"),s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," # 创建后会在后台运行")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"$"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," docker"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," exec"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -it"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," mycentos7-2"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /bin/bash"),s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," # 进入容器的bash中")])])]),s("button",{class:"collapse"})],-1),rs=s("ul",null,[s("li",null,"容器与宿主机间传递文件")],-1),ds=s("div",{style:{"max-height":"300px"},class:"language-shell vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"shell"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 复制宿主机中的read.md文件到容器mycentos7-1的/opt/test目录下")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"$"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," docker"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," cp"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," readme.md"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," mycentos7-1:/opt/test")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 复制容器mycentos7-1 /opt/test/docker.md的文件到宿主机中的目录/opt/test目录下")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"$"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," docker"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," cp"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," mycentos7-1:/opt/test/docker.md"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /opt/test")])])]),s("button",{class:"collapse"})],-1),ps=s("ul",null,[s("li",null,"关联宿主机文件夹(目录挂载、数据卷)")],-1),Fs=s("blockquote",null,[s("p",null,"数据卷是宿主机当中的一个目录或文件，只有当执行了挂载操作时才会成为数据卷。")],-1),os=s("blockquote",null,[s("p",null,"数据卷的作用：1.使得容器间可以交换数据(挂载到同一数据卷) 2.使得容器和宿主机之间可以交换数据(容器的数据持久化) 3.使得容器可以和外部环境交换数据(通过宿主机这个中间人)。")],-1),cs=s("blockquote",null,[s("p",null,[i("创建时关联挂载，这样在宿主机中的 "),s("code",null,"/opt/test"),i(" 下操作时会反映到容器的相应关联目录，在容器中修改也会反映到宿主机相应目录。")])],-1),gs=s("div",{style:{"max-height":"300px"},class:"language-shell vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"shell"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 参数v来设置，第一个为容器目录，第二为宿主机目录")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# docker run ... -v 宿主机目录(绝对路径):容器目录(绝对路径) ...")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"$"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," docker"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," run"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -di"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -v"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /opt/test:/opt/tets"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --name=mycentos7-1"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," centos:7"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /bin/bash")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 多个容器挂载到宿主机同一数据卷中")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 启动一个数据卷容器c3，c3的/volume会挂载到宿主机的一个目录当中去，可以使用docker inspect c3查看")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"docker"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," run"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -d"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --name=c3"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -v"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /volume"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," centos:7"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /bin/bash"),s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," # 数据卷容器不需要运行，只需要提供数据卷挂载即可")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 启动2个容器并挂载数据卷容器c3，参数--volumes-from为让容器继承其他容器的挂载配置 是一种便捷的挂载方式")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"docker"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," run"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -it"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --name=c1"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --volumes-from"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," c3"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," centos:7"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /bin/bash")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"docker"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," run"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -it"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --name=c2"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --volumes-from"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," c3"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," centos:7"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /bin/bash")])])]),s("button",{class:"collapse"})],-1),ys=s("ul",null,[s("li",null,"查看容器ip")],-1),Cs=s("div",{style:{"max-height":"300px"},class:"language-shell vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"shell"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"$"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," docker"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," inspect"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," mycentos7-1")])])]),s("button",{class:"collapse"})],-1),us=s("h2",{id:"docker部署mysql并设置数据卷",tabindex:"-1"},[i("Docker部署MySQL并设置数据卷 "),s("a",{class:"header-anchor",href:"#docker部署mysql并设置数据卷","aria-label":'Permalink to "Docker部署MySQL并设置数据卷"'},"​")],-1),Bs=s("p",null,"参数-p设置端口映射，即将宿主机的3306端口映射为容器的3306端口，这样就可以通过访问宿主机的3306端口来访问到容器的3306端口了。",-1),Es=s("div",{style:{"max-height":"300px"},class:"language-sh vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"sh"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"$"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," docker"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," run"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -di"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -p"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," 3306:3306"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --name=mysql-8.0.26"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -v"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /opt/mysql/conf:/etc/mysql/conf.d"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," \\")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"> "),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"-v"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /opt/mysql/logs:/logs"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -v"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /opt/mysql/data:/var/lib/mysql"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," \\")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"> "),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"-e"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," MYSQL_ROOT_PASSWORD="),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"12345"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," mysql:8.0.26")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"$"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," docker"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," exec"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -it"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," mysql-8.0.26"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /bin/bash"),s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," # 进入容器")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"root@d64e446d22e6:/#"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," mysql"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -uroot"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -p"),s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," # 输入密码登录即可连接数据库")])])]),s("button",{class:"collapse"})],-1),ms=s("p",null,[i("使用外部软件(Navicat)连接数据库：使用"),s("code",null,"ifconfig"),i("查看ens33下的inet的ip，将这个ip填入连接的ip处即可，端口写映射的宿主机端口3306")],-1),bs=s("h2",{id:"docker容器的本质",tabindex:"-1"},[i("Docker容器的本质 "),s("a",{class:"header-anchor",href:"#docker容器的本质","aria-label":'Permalink to "Docker容器的本质"'},"​")],-1),vs=s("p",null,[i("本质是一个叠加的文件系统，bootfs(即内核部分)是使用的宿主机的，rootfs(即各厂商修改后的部分，结合内核就是发行版)也可以复用。 "),s("img",{src:C,alt:"Docker组成"})],-1),_s=s("h2",{id:"dockerfile",tabindex:"-1"},[i("Dockerfile "),s("a",{class:"header-anchor",href:"#dockerfile","aria-label":'Permalink to "Dockerfile"'},"​")],-1),Ds=s("p",null,[s("strong",null,"dockerfile文件"),i("，在当前目录下有该文件和"),s("code",null,"springboot-docker-1.0.jar"),i("jar包")],-1),fs=s("div",{style:{"max-height":"300px"},class:"language-sh vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"sh"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"FROM"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," java:8")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"MAINTAINER"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," holo"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," <"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"holo@lolunsu.c"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"n"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},">")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"ADD"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," springboot-docker-1.0.jar"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," app.jar")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"CMD"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," java"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -jar"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /app/java/app.jar")])])]),s("button",{class:"collapse"})],-1),As=s("p",null,[s("strong",null,"构建镜像")],-1),xs=s("div",{style:{"max-height":"300px"},class:"language-sh vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"sh"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"docker"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," bulid"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -f"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," ./dockerfile"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -t"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," app:1.0"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," .")])])]),s("button",{class:"collapse"})],-1),$s=s("p",null,[s("strong",null,"运行镜像")],-1),qs=s("div",{style:{"max-height":"300px"},class:"language-sh vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"sh"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 映射端口为8080")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"docker"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," run"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -di"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -p"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," 8080:8080"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --name=springbootapp"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," app:1.0")])])]),s("button",{class:"collapse"})],-1),Ps=s("h2",{id:"仓库",tabindex:"-1"},[i("仓库 "),s("a",{class:"header-anchor",href:"#仓库","aria-label":'Permalink to "仓库"'},"​")],-1),Ss=s("p",null,"待补充",-1),Rs=s("h2",{id:"在阿里云服务器上安装docker并部署一个静态网站",tabindex:"-1"},[i("在阿里云服务器上安装Docker并部署一个静态网站 "),s("a",{class:"header-anchor",href:"#在阿里云服务器上安装docker并部署一个静态网站","aria-label":'Permalink to "在阿里云服务器上安装Docker并部署一个静态网站"'},"​")],-1),js=s("ol",null,[s("li",null,[i("安装教程请参考此文-"),s("a",{href:"https://developer.aliyun.com/article/932977",target:"_blank",rel:"noreferrer"},"安装教程")]),s("li",null,"将项目传到服务器中"),s("li",null,"编写Dockerfile"),s("li",null,"根据Dockerfile构建镜像"),s("li",null,"启动容器并映射相应端口")],-1),Qs={__name:"docker",setup(Ns,{expose:r}){const e=JSON.parse('{"title":"Docker学习记录","description":"","frontmatter":{"title":"Docker学习记录","date":"2024-6-4","categories":"Docker","tags":["docker"]},"headers":[{"level":2,"title":"Docker安装基于Ubuntu20.04系统","slug":"docker安装基于ubuntu20-04系统","link":"#docker安装基于ubuntu20-04系统","children":[]},{"level":2,"title":"修改Docker仓库镜像源","slug":"修改docker仓库镜像源","link":"#修改docker仓库镜像源","children":[]},{"level":2,"title":"以非Root身份执行Docker命令","slug":"以非root身份执行docker命令","link":"#以非root身份执行docker命令","children":[]},{"level":2,"title":"镜像","slug":"镜像","link":"#镜像","children":[]},{"level":2,"title":"容器","slug":"容器","link":"#容器","children":[]},{"level":2,"title":"Docker部署MySQL并设置数据卷","slug":"docker部署mysql并设置数据卷","link":"#docker部署mysql并设置数据卷","children":[]},{"level":2,"title":"Docker容器的本质","slug":"docker容器的本质","link":"#docker容器的本质","children":[]},{"level":2,"title":"Dockerfile","slug":"dockerfile","link":"#dockerfile","children":[]},{"level":2,"title":"仓库","slug":"仓库","link":"#仓库","children":[]},{"level":2,"title":"在阿里云服务器上安装Docker并部署一个静态网站","slug":"在阿里云服务器上安装docker并部署一个静态网站","link":"#在阿里云服务器上安装docker并部署一个静态网站","children":[]}],"relativePath":"pages/posts/docker/docker.md","path":"/home/runner/work/blog-code/blog-code/pages/posts/docker/docker.md","lastUpdated":1721282064000}'),k=F(),h=e.frontmatter||{};return k.meta.frontmatter=Object.assign(k.meta.frontmatter||{},e.frontmatter||{}),n("pageData",e),n("valaxy:frontmatter",h),globalThis.$frontmatter=h,r({frontmatter:{title:"Docker学习记录",date:"2024-6-4",categories:"Docker",tags:["docker"]}}),(t,Ts)=>{const d=p;return o(),c(d,{frontmatter:g(h)},{"main-content-md":l(()=>[u,y(" more "),B,E,m,b,v,_,D,f,A,x,$,q,P,S,R,j,N,w,T,M,U,G,L,O,I,Q,V,J,W,Y,H,K,z,X,Z,ss,is,ls,ts,as,es,hs,ks,ns,rs,ds,ps,Fs,os,cs,gs,ys,Cs,us,Bs,Es,ms,bs,vs,_s,Ds,fs,As,xs,$s,qs,Ps,Ss,Rs,js]),"main-header":l(()=>[a(t.$slots,"main-header")]),"main-header-after":l(()=>[a(t.$slots,"main-header-after")]),"main-nav":l(()=>[a(t.$slots,"main-nav")]),"main-content":l(()=>[a(t.$slots,"main-content")]),"main-content-after":l(()=>[a(t.$slots,"main-content-after")]),"main-nav-before":l(()=>[a(t.$slots,"main-nav-before")]),"main-nav-after":l(()=>[a(t.$slots,"main-nav-after")]),comment:l(()=>[a(t.$slots,"comment")]),footer:l(()=>[a(t.$slots,"footer")]),aside:l(()=>[a(t.$slots,"aside")]),"aside-custom":l(()=>[a(t.$slots,"aside-custom")]),default:l(()=>[a(t.$slots,"default")]),_:3},8,["frontmatter"])}}};export{Qs as default};
